<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RedThread — Home</title>

  <!-- Estilos -->
  <link rel="stylesheet" href="assets/css/tienda.css" />

  <!-- Core JS compartido -->
  <script src="js/data.js"></script>
  <script src="js/validators.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/cart.js"></script>
  <script src="js/ui.js"></script>

  <!-- Animación simple para las cards (por si el CSS aún no lo tuviera) -->
  <style>
    @keyframes fadeIn { from { opacity:.0; transform: translateY(6px); } to { opacity:1; transform:none; } }
  </style>
</head>
<body>
  <div class="container">
    <!-- HERO -->
    <section class="hero">
      <div>
        <h1>Moda urbana para todos</h1>
        <p>Encuentra poleras, polerones y más. Envíos a todo Chile.</p>
        <a class="btn accent" href="productos.html">Ver productos</a>
      </div>
      <!-- Imagen local / neutral (sin dependencia externa) -->
      <img
        src="assets/img/placeholder.png"
        alt="RedThread Hero"
        style="width:100%;border-radius:12px"
        loading="lazy"
      />
    </section>

    <!-- DESTACADOS -->
    <h3>Destacados</h3>
    <div id="destacados" class="grid"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Navbar y footer comunes
      renderNavbar();

      // Tomamos 4 primeros como destacados
      const prods = (lsGet(LS_KEYS.productos, []) || []).slice(0, 4);
      const cont = document.getElementById('destacados');

      cont.innerHTML = prods.map(p => `
        <div class="card" style="animation:fadeIn .25s ease both">
          <img
            src="${p.imagen}"
            alt="${p.nombre}"
            loading="lazy"
            referrerpolicy="no-referrer"
            onerror="this.onerror=null;this.src='assets/img/placeholder.png'"
          >
          <div class="body">
            <div style="font-weight:700">${p.nombre}</div>
            <div class="price">${money(p.precio)}</div>
            <p style="opacity:.8;min-height:40px">
              ${(p.desc || '').slice(0, 68)}${(p.desc && p.desc.length > 68) ? '…' : ''}
            </p>
            <div style="display:flex;gap:8px;margin-top:8px">
              <a class="btn outline" href="producto.html?id=${p.id}">Ver</a>
              <button class="btn accent" onclick="cartAdd(${p.id}, 1)">Añadir</button>
            </div>
          </div>
        </div>
      `).join('');

      renderFooter();
    });
  </script>
</body>
</html>
